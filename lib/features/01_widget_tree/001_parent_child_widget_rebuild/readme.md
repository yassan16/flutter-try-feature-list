# 親・子Widget間の再ビルド
前提：再描画の仕組み 
* setState(() {}) を呼ぶと、Flutterは build() を再実行します。
* 再描画されるのはそのウィジェットと配下の子ウィジェットだけです。
* 親ウィジェットに影響はありません。


## 疑問：子ウィジェットが build を持っている場合は？
### 回答
子ウィジェットが別クラスとして StatelessWidget や StatefulWidget に分かれている場合、その親ウィジェットの build() が再実行されると、Flutterは子ウィジェットのインスタンスが「変わっていないか」を比較してから再描画の判断をします。

### 具体的にいうと：
✅ 子ウィジェットが「新しいインスタンスに置き換えられた」場合：
→ その子も再ビルドされる。

❌ 子ウィジェットが「以前と同じインスタンス（もしくは同じ Key）」の場合：
→ Flutterは賢く「再ビルドしない」ようにします。

### 🧠 Flutterのビルドの仕組みの概要
1. setState()が呼ばれると、親の build() が呼ばれる。
2. build() の中で、子ウィジェットが生成される。
3. Flutter は「前回のウィジェットツリー」と「今回のウィジェットツリー」を比較（diff）。
4. 「変わったウィジェット」だけを再描画する。

### 🔁 再描画の判断基準
* StatelessWidget や StatefulWidget は、== で比較されて違えば再描画。
* Key を付けておくことで、「別のインスタンスでも同じもの」として扱ってくれる。

### ✅ 結論まとめ
| 状況 | 子の build() は？ |
| ---- | ---- |
| 親で setState() を呼び、子を再生成する | 再ビルドされる |
| 子を const で定義 | 再ビルドされない |
| 子に Key をつけて Flutter に「同じ」と教える | 再ビルドされない |
| 子が Provider 等で独自に watch している	 | 自分の判断で再ビルド |

### 実行ログ
```
flutter: ParentWidget build
flutter: ChildWidget build
(2つ目の子widetのログはなし)
```
